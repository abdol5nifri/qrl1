<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>๐ณ ุชูููุฏ QR ุงุญุชุฑุงูู</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/qr-code-styling/lib/qr-code-styling.js"></script>
    <style>
      /* ูุงุฏ ุงููCSS ูู ุงููู ุบูุฎูู ุงููQR ูุจุงู ุจุฏูุฉ ุนุงููุฉ ูุงูุดุงุดุฉ */
      #qr canvas {
        width: 100% !important; /* ุชุฃูุฏ ูู ุฃู ุงููcanvas ููุนูุฑ ุงููdiv ุฏูุงูู ูุงูู */
        height: 100% !important; /* ุชุฃูุฏ ูู ุฃู ุงููcanvas ููุนูุฑ ุงููdiv ุฏูุงูู ูุงูู */
        /* ูุงุฏ ุงูุฎุงุตูุงุช ููุญุณููู ุฌูุฏุฉ ุนุฑุถ ุงูุตูุฑุฉ ููู ูุชุตุบุฑ ุฃู ุชูุจุฑ */
        image-rendering: crisp-edges; /* ูููุชุตูุญุงุช ุงูุญุฏูุซุฉ */
        image-rendering: -moz-crisp-edges; /* ููุชุตูุญ ูุงูุฑูููุณ */
        image-rendering: -webkit-optimize-contrast; /* ููุชุตูุญุงุช ูุฑูู ูุณูุงุฑู */
        image-rendering: optimizeSpeed; /* ููุชุตูุญุงุช ูุฏููุฉุ ูุชุนุงูู ุจุงุด ุงูุตูุฑุฉ ุชุจุงู ุญุงุฏุฉ */
      }
      /* ุณุชุงููุงุช ุฅุถุงููุฉ ููุชุตููู ุงูุฌุฏูุฏ (ูููู ุชุนุฏููู ุญุณุจ ุงูุญุงุฌุฉ) */
      .input-group {
        display: flex;
        flex-direction: column;
        margin-bottom: 1rem;
      }
      .input-group label {
        margin-bottom: 0.5rem;
        font-weight: 600;
        color: #333; /* ููู ุงููุต ุฏูุงู ุงููlabel */
      }
      .input-group input[type="text"],
      .input-group select {
        border: 1px solid #e2e8f0; /* ููู Border */
        border-radius: 0.375rem; /* Roundness */
        padding: 0.5rem;
        font-size: 1rem;
      }
      .input-group input[type="color"] {
        border: none;
        padding: 0;
        height: 40px; /* ุจุงุด ุชููู ูุฏ ุงูุทูู ุฏูุงู ุงูุฅูุจูุชุงุช ุงูุขุฎุฑูู */
        width: 40px; /* ุญุฌู ูุฑุจุน ุงูููู */
        cursor: pointer;
        background-color: transparent;
      }
      .input-group input[type="file"] {
        padding: 0.5rem 0; /* ุจุงุด ูููู ุนูุฏู ุดููุฉ ุฏูุงู ุงููpadding */
      }
      .button-group {
        display: flex;
        flex-direction: column;
        gap: 0.75rem; /* ุงููุณุงูุฉ ุจูู ุงูุฃุฒุฑุงุฑ */
        margin-top: 1.5rem;
      }
      .button-group button {
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        font-weight: 600;
        transition: background-color 0.2s ease-in-out;
      }
      .qr-display-area {
        display: flex;
        flex-direction: column; /* ุจุงุด ุงููQR ูุงููุต ููููู ูุงุญุฏ ุชุญุช ูุงุญุฏ */
        justify-content: center;
        align-items: center;
        padding-top: 1rem;
        padding-bottom: 1rem;
        min-height: 250px; /* ุฒุฏูุง ุงูุทูู ุดููุฉ ุจุงุด ูููู ุจูุงุตุฉ ูููุต */
      }
      .qr-text-below {
        margin-top: 1rem; /* ูุณุงูุฉ ุจูู ุงููQR ูุงููุต */
        font-size: 1.5rem; /* ุญุฌู ุงูุฎุท ุฏูุงู ุงููุต */
        font-weight: bold;
        color: #333;
      }
    </style>
  </head>
  <body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">
    <div class="bg-white shadow-xl rounded-xl p-6 w-full max-w-md">
      <h1 class="text-3xl font-extrabold mb-6 text-center text-gray-800">๐ณ ุชูููุฏ QR ุงุญุชุฑุงูู</h1>

      <div class="input-group">
        <label for="text">๐ ุงููุต ุฃู ุงูุฑุงุจุท:</label>
        <input id="text" type="text" placeholder="ุฃุฏุฎู ููุง..." />
      </div>

      <div class="input-group">
        <label for="color">๐จ ุงูููู:</label>
        <input id="color" type="color" value="#000000" />
      </div>

      <div class="input-group">
        <label for="style">๐ ุงูุดูู:</label>
        <select id="style">
          <option value="square">ูุฑุจุนุงุช</option>
          <option value="dots">ููุท</option>
          <option value="rounded">ุฏุงุฆุฑู</option>
        </select>
      </div>

      <div class="input-group">
        <label for="logo">๐ผ๏ธ ุดุนุงุฑ (ุงุฎุชูุงุฑู):</label>
        <input id="logo" type="file" accept="image/*" />
      </div>
      
      <div class="input-group">
        <label for="bottomText">๐ ูุต ุชุญุช ุงููQR (ุงุฎุชูุงุฑู):</label>
        <input id="bottomText" type="text" placeholder="ูุซุงู: VITORHOP" />
      </div>

      <div class="qr-display-area">
        <div id="qr" class="w-[200px] h-[200px] overflow-hidden"></div>
        <div id="text-below-qr" class="qr-text-below"></div>
      </div>

      <div class="button-group">
        <button id="download" class="bg-green-500 text-white hover:bg-green-600">โฌ๏ธ ุชุญููู QR</button>
        <button id="share" class="bg-blue-500 text-white hover:bg-blue-600">๐ค ูุดุงุฑูุฉ QR</button>
      </div>
    </div>

    <script>
      const initialText = document.getElementById("text").value;
      const initialBottomText = document.getElementById("bottomText").value;

      const qrCode = new QRCodeStyling({
        width: 1000,
        height: 1000,
        type: "canvas",
        data: initialText,
        image: "",
        dotsOptions: {
          color: "#000",
          type: "square",
        },
        backgroundOptions: {
          color: "#FFFF00", // ููู ุฃุตูุฑ ููุฎูููุฉ
        },
        imageOptions: {
          crossOrigin: "anonymous",
          margin: 20, // ูุงุฏ ุงููุงูุด ุฎุงุต ุจุงูุดุนุงุฑ ุฏุงุฎู ุงููQR
        },
        // ูุง ูู ุงููุงูุด ุงูุฌุฏูุฏ ูู ุจุบูุชู ูููQR Code ูุงูู (ุงููQuiet Zone)
        margin: 30, // ูููุฉ 30 ุจููุณู ุฏูุงู ุงููุงูุด ุงูุฃุจูุถ ูู ูู ุฌูุฉ ุญูู ุงููQR
      });

      qrCode.append(document.getElementById("qr"));

      function updateBottomText() {
        document.getElementById("text-below-qr").innerText = document.getElementById("bottomText").value;
      }

      function updateQRCode() {
        const text = document.getElementById("text").value;
        const color = document.getElementById("color").value;
        const shape = document.getElementById("style").value;

        qrCode.update({
          data: text,
          dotsOptions: {
            color: color,
            type: shape,
          },
          backgroundOptions: {
             color: "#FFFF00", // ุจุงุด ุชุจูู ุฏููุง ุตูุฑุงุก
          },
        });
        updateBottomText();
      }

      document.getElementById("text").addEventListener("input", updateQRCode);
      document.getElementById("color").addEventListener("input", updateQRCode);
      document.getElementById("style").addEventListener("change", updateQRCode);
      document.getElementById("bottomText").addEventListener("input", updateQRCode);

      document.getElementById("logo").addEventListener("change", function (e) {
        const file = e.target.files[0];
        if (!file) {
            qrCode.update({ image: "" });
            return;
        }
        const reader = new FileReader();
        reader.onload = function (event) {
          qrCode.update({ image: event.target.result });
        };
        reader.readAsDataURL(file);
      });

      document.getElementById("download").addEventListener("click", () => {
        qrCode.download({ name: "qr-code", extension: "png" });
      });

      document.getElementById("share").addEventListener("click", async () => {
        const canvas = document.querySelector("#qr canvas");
        canvas.toBlob(async (blob) => {
          const file = new File([blob], "qr-code.png", { type: "image/png" });
          if (navigator.canShare && navigator.canShare({ files: [file] })) {
            try {
              await navigator.share({ files: [file], title: "QR Code", text: "ูุง ูู ููุฏ QR ุฏูุงูู!" });
            } catch (e) {
              alert("ุชู ุฅูุบุงุก ุงููุดุงุฑูุฉ");
            }
          } else {
            alert("ุงููุดุงุฑูุฉ ุบูุฑ ูุฏุนููุฉ ุนูู ูุฐุง ุงูุฌูุงุฒ.");
          }
        });
      });

      updateBottomText(); // ุจุงุด ุงููุต ูุจุงู ูุงูุจุฏุงูุฉ
    </script>
  </body>
</html>
